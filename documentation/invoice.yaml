securityDefinitions:
  APIKeyHeader:
    type: apiKey
    in: header
    name: Authorization

paths:
  /member/invoice:
    get:
      security:
        - APIKeyHeader: []
      tags:
        - Member Invoice
      summary: Get all invoices.
      produces:
        - application/json
      responses:
        200:
          description: All invoices retrieved correctly.
        500:
          description: Unexpected error
  /member/{id}/invoice:
    post:
      security:
        - APIKeyHeader: []
      tags:
        - Member Invoice
      summary: Register a new invoice for a member.
      produces:
        - application/json
      parameters:
        - in: path
          name: id
          required: true
          description: The member identifier
          schema:
            type: string
        - in: body
          name: body
          required: true
          example:
            expirationDate: 2020-09-03
            invoiceType: "Factura A"
      responses:
        200:
          description: Member's invoice successfully registered
        400:
          description: Validation error.
        409:
          description: The time-period overlaps with another invoice.
        500:
          description: Unexpected error
  /member/{id}/invoice/preview:
    get:
      security:
        - APIKeyHeader: []
      tags:
        - Member Invoice
      summary: Get the invoice preview for a member.
      produces:
        - application/json
      parameters:
        - in: path
          name: id
          required: true
          description: The member identifier
          schema:
            type: string
      responses:
        200:
          description: Member's invoice preview successfully retrieved
        400:
          description: Invalid member id
        409:
          description: The time-period overlaps with another invoice.
        500:
          description: Unexpected error
  /member/{memberId}/invoice/{invoiceId}:
    put:
      security:
        - APIKeyHeader: []
      tags:
        - Member Invoice
      summary: Pay invoice
      produces:
        - application/json
      parameters:
        - in: path
          name: memberId
          required: true
          description: The member identifier
          schema:
            type: string
        - in: path
          name: invoiceId
          required: true
          description: The invoice identifier
          schema:
            type: string
        - in: body
          name: body
          required: true
          example:
            card:
              cvv: '123'
              number: '0123123123123123'
              expiryDate: '0925'
      responses:
        200:
          description: Invoice successfully paid
        400:
          description: Invalid member or invoice data
        500:
          description: Unexpected error
    get:
      security:
        - APIKeyHeader: []
      tags:
        - Member Invoice
      summary: Get invoice by id
      produces:
        - application/json
      parameters:
        - in: path
          name: memberId
          required: true
          description: The member identifier
          schema:
            type: string
        - in: path
          name: invoiceId
          required: true
          description: The invoice identifier
          schema:
            type: string
      responses:
        200:
          description: Invoice successfully paid
        400:
          description: Invalid member or invoice data
        404:
          description: Invoice not found
        500:
          description: Unexpected error
