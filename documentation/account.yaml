securityDefinitions:
  APIKeyHeader:
    type: apiKey
    in: header
    name: Authorization

paths:
  /account:
    put:
      security:
        - APIKeyHeader: []
      tags:
        - Account
      summary: Update current user's account data. 
      produces:
        - application/json
      parameters:
        - in: body
          name: body
          required: true
          example:
            name: John
            lastName: Doe
            address: False street 123
            dateOfBirth: 1991-06-07
      responses:
        200:
          description: Account successfully updated
        401:
          description: Token invalid or not provided.
        500:
          description: Unexpected server error updating account
  /account/login:
    post:
      tags:
        - Account
      summary: Login with any user account
      produces:
        - application/json
      parameters:
        - in: body
          name: body
          required: true
          example:
            email: johndoe@uade-gym-app-g7.com.ar
            password: uade2020
      responses:
        200:
          description: User successfully logged in
        401:
          description: Unauthorized - Wrong credentials (or not provided at all)
        500:
          description: Unexpected error on login
  /account/register:
    post:
      tags:
        - Account
      summary: Register a new user account
      produces:
        - application/json
      parameters:
        - in: body
          name: body
          required: true
          example:
            name: John
            lastName: Doe
            email: johndoe@uade-gym-app-g7.com.ar
            address: False street 123
            dateOfBirth: 1991-06-07
            password: uade2020
      responses:
        200:
          description: User account successfully created
        400:
          description: Validation error. Verify the request's body.
        409:
          description: Duplicated email
        500:
          description: Unexpected error on login
  /account/current-user:
    get:
      security:
        - APIKeyHeader: []
      tags:
        - Account
      summary: Get current user according to the provided access token
      produces:
        - application/json
      responses:
        200:
          description: Retrieves the current user account
        401:
          description: Unauthorized - Token is invalid or not provided
        500:
          description: Unexpected error getting the current user
  /account/change-password:
    put:
      security:
        - APIKeyHeader: []
      tags:
        - Account
      summary: Change current user's password
      produces:
        - application/json
      parameters:
        - in: body
          name: body
          required: true
          example:
            currentPassword: uade2020
            newPassword: uade2020!
      responses:
        200:
          description: The password was correctly updated
        401:
          description: Unauthorized - Token may be invalid or the current password is incorrect.
        400:
          description: The required passwords were not provided in the body
        500:
          description: Unexpected error
